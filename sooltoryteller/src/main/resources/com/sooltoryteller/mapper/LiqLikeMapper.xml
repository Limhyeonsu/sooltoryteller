<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sooltoryteller.mapper.LiqLikeMapper">

<select id="getCount" resultType="Integer">
select count(*)
from liq_like
where member_id =#{memberId}
and liq_id=#{liqId}
</select>

<insert id="insert">
insert into liq_like(liq_like_id,member_id,liq_id,regdate)
values(liq_like_seq.nextval,#{memberId},#{liqId},sysdate)
</insert>

<delete id="delete">
delete from liq_like
where member_id =#{memberId}
and liq_id=#{liqId}
</delete>

<select id="getMyListWithPaging" resultType="com.sooltoryteller.domain.MyLikeVO">
	<![CDATA[
	select lk.liq_id, lk.nm,lk.cate,lk.capct,lk.lv, lk.liq_thumb,
	lk.liq_like_id,co_name    
 	from(select /*+index_desc(k liq_like_pk)*/ 
	rownum rn,l.liq_id, l.nm,l.cate,l.capct,l.lv, l.liq_thumb,
	k.liq_like_id,
	c.nm co_name
	from liq l,liq_like k, liq_co c
	where k.member_id=#{memberId}
	and l.liq_id = k.liq_id
	and l.liq_co_id = c.liq_co_id
    and rownum <=#{cri.pageNum}*#{cri.amount}
    )lk where rn > (#{cri.pageNum} -1)*#{cri.amount}
    ]]>
	</select>
	
	<select id="getCountMemberId" resultType="int">
		<![CDATA[
		select count(liq_like_id) from liq_like 
		where member_id = #{memberId}
		]]>
	</select>
</mapper>