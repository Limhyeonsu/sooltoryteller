<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sooltoryteller.mapper.LiqLikeMapper">

<select id="getCount" resultType="Integer">
select count(*)
from liq_like
where member_id =#{memberId}
and liq_id=#{liqId}
</select>

<insert id="insert">
insert into liq_like(liq_like_id,member_id,liq_id,regdate)
values(liq_like_seq.nextval,#{memberId},#{liqId},sysdate)
</insert>

<delete id="delete">
delete from liq_like
where member_id =#{memberId}
and liq_id=#{liqId}
</delete>

<select id="getMyListWithPaging" resultType="com.sooltoryteller.domain.MyLikeVO">
	<![CDATA[
	select lk.liq_id, lk.nm,lk.prc,lk.cate,lk.capct,lk.lv, lk.irdnt,lk.img,
	lk.liq_like_id    
 	from(select /*+index_desc(k liq_like_pk)*/ 
	rownum rn,l.liq_id, l.nm,l.prc,l.cate,l.capct,l.lv, l.irdnt,l.img,
	k.liq_like_id
	from liq l,liq_like k
	where l.liq_id = k.liq_id
	and k.member_id=#{memberId}
    and rownum <=#{cri.pageNum}*#{cri.amount}
    )lk where rn > (#{cri.pageNum} -1)*#{cri.amount}
    ]]>
	</select>
	
	<select id="getCountMemberId" resultType="int">
		<![CDATA[
		select count(liq_like_id) from liq_like 
		where member_id = #{memberId}
		]]>
	</select>
</mapper>