<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sooltoryteller.mapper.AdminMapper">
<!-- 회원 리스트 페이징 처리 -->
<select id="getListWithPaging" resultType="com.sooltoryteller.domain.MemberVO">
	<![CDATA[
	select member_id, email, name, telno, regdate, updatedate, regstus
	from( select /*+INDEX_DESC(member member_pk) */
		rownum rn, member_id, email, name, telno, regdate, updatedate, regstus
		from member
		where rownum <= #{pageNum} * #{amount}
		and authority = 'USER'
		)
	where rn > (#{pageNum} -1) * #{amount}
	]]>
</select>

<!-- 모든 회원 수 -->
<select id="getTotalCount" resultType="int">
	select count(*) from member
</select>
</mapper>